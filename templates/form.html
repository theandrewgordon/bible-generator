<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Create Bible Worksheet</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css') }}"
    />
  </head>
  <body>
    <div class="container">
      <header>
        <img
          src="{{ url_for('static', filename='faith_sparks_logo.png') }}"
          alt="Faith Sparks Logo"
          class="logo"
        />
        <button id="darkToggle">üåô Toggle Dark Mode</button>
      </header>

      <h1>Create Your Worksheet</h1>

      <form method="POST" action="/generate">
        <label for="verse">Bible Verse (e.g. John 3:16)</label>
        <input
          type="text"
          name="verse"
          id="verse"
          required
          value="{{ request.form.get('verse', '') }}"
        />

        {% if verse_preview %}
        <div class="preview-box">{{ verse_preview | safe }}</div>
        {% endif %}

        <label for="version">Bible Version</label>
        <select name="version" id="version">
          <option value="nlt">New Living Translation (NLT)</option>
          <option value="esv">English Standard Version (ESV)</option>
          <option value="kjv">King James Version (KJV)</option>
        </select>

        <label>
          <input type="checkbox" name="cursive" /> Use cursive tracing font
        </label>

        <button type="submit">Generate Worksheet</button>

        <div id="spinner" style="display: none; margin-top: 10px">
          <img
            src="{{ url_for('static', filename='spinner.gif') }}"
            alt="Loading..."
          />
        </div>

        <div id="success" style="display: none; margin-top: 10px; color: green">
          ‚úÖ Your worksheet has been generated! Check your downloads folder to
          view it.
        </div>
      </form>

      <a class="download-link" href="/download_all"
        >‚¨áÔ∏è Download All Worksheets</a
      >
    </div>

    <script>
      const form = document.querySelector("form");
      const spinner = document.getElementById("spinner");
      const success = document.getElementById("success");

      form.addEventListener("submit", () => {
        if (spinner) spinner.style.display = "inline-block";
        if (success) success.style.display = "none";
      });

      window.addEventListener("load", () => {
        if (spinner) spinner.style.display = "none";
      });

      // Optional: Persist dark mode toggle
      const darkToggle = document.getElementById("darkToggle");
      darkToggle.addEventListener("click", () => {
        document.body.classList.toggle("dark");
      });
    </script>
  </body>
</html>
